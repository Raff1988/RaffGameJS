<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css" type="text/css" />

    <title>Games-JS</title>

</head>


<body>
<canvas id="canvas" width="2000" height="1090"></canvas>
<script>
 var game = {
    tickNumber: 0,
    timer:null,
    score: 0,
    board: [
        "########################################",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                 #####                #",
        "#                 #####                #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "#                                      #",
        "########################################"
    ],
    fruit: [
        {x: 1, y:1}
    ],
    tick: function() {
        window.clearTimeout(game.timer);
        game.tickNumber++;
        if(game.tickNumber % 10 == 0) {
            game.addRandomFruit();
        }
        var result = snake.move();
        if(result == "gameover") {
            alert("Game over! Player scored: " + game.score);
            return;
        }
        graphics.drawGame();
        game.timer = window.setTimeout("game.tick()", 500);
    },
    addRandomFruit: function() {
        var randomY = Math.floor(Math.random() * game.board.length) + 0
        var randomX = Math.floor(Math.random() * game.board[randomY].length) + 0;
        var randomLocation = {x: randomx, y: randomY};
        if(game.isEmpty(randomLocation) && !game.isFruit(randomLocation)) {
            game.fruit.push(randomLocation);
        }
    };
    isEmpty: function(location) {
        return game.board[location.y][location.x] == ' ';
    };
    isWall: function(location) {
        return game.board[location.y][location.x] == '#';
    };
    isFruit: function(location) {
        for(var fruitNumber = 0; fruitNumber < game.fruit.length; fruitNumber++) {
            var fruit = game.fruit[fruitNumber];
            if(location.x == fruit.x && location.y == fruit.y) {
               game.fruit.splice(fruitNumber, 1); 
               return true;
            }
        } 
        return false;
    },
    isSnake: function(location) {
        for(var snakePart = 0; snakePart < snake.parts.length; snakePart++) {
            var part = snake.parts[snakePart];
            if(location.x == part.x && location.y == part.y) {
                return true;
            }
        }
        return false;
    }
 };
 var snake = {
     parts: [
        {x: 4, y: 2},
        {x: 3, y: 2},
        {x: 2, y: 2},
     ],
     facing: "E",
     nextLocation: function() {
         var snakeHead = snake.parts[0];
         var targetX = snakeHead.x;
         var targetY = snakeHead.y;
         targetY = snake.facing == "N" ? targetY-1 : targetY;
         targetY = snake.facing == "S" ? targetY+1 : targetY;
         targetX = snake.facing == "W" ? targetY-1 : targetX;
         targetX = snake.facing == "E" ? targetY+1 : targetX;
         return {x: targetX, y: targetY};
     },
     move: function() {
         var location = snake.nextLocation();
         if(game.isWall(location)
         || game.isSnake(location)) {
         return "gameover";
         }
         if(game,isEmpty(location)) {
             snake.parts.unshift(location);
             snake.parts.pop();
         }
         if(game.isFruit(location)) {
             snake.parts.unshift(location);
             game.score++;
         }
     }
 };
 var graphics = {
     canvas: document.getElementById("canvas"),
     squareSize: 30,
     drawBoard: function(ctx) {
         var currentYoffset = 0;
         game.board.forEach(function checkLine(line) {
             line = line.split('');
             var currentXoffset = 0;
             line.forEach(function checkCharacter(character) {
                 if(character == '#') {
                     ctx.fillStyle = "black";
                     ctx.fillRect(currentXoffset, currentYoffset, graphics.squareSize,
graphics.squareSize);
                 }
                currentXoffset += graphics.squareSize;
             });
                currentYoffset += graphics.squareSize;
         })
     }
 }
</script>


<footer>
    <div id="footer">
<p>	&copy; Created by Raffaqat Ali 2020</p>
</div>
</footer>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="Assets/index.js"></script>
</body>
</html>